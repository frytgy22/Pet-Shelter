<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml" lang="en">
<head th:replace="post/include/head.html"></head>

<body>
<header th:replace="include/header.html"></header>

<!-- Page Content -->
<div class="container">

    <div class="row">
        <!-- Blog Entries Column -->

        <div class="col-md-8 top">

            <p class="text-danger" th:text="${message}"></p>
            <a sec:authorize="hasRole('ADMIN')" class="btn btn-primary" th:href="@{/posts/create}">
                <svg th:replace="include/icon/add.html"></svg>
                Add new post</a>

            <h1 class="my-4">Everything you need for pets
                <small>is here</small>
            </h1>
            <!-- Blog Post -->
            <div class="card mb-4" th:each="post : ${posts}">

                <div th:switch="${post.fileType}">

                    <video th:case="'video'" width="100%" controls="controls">
                        <source src="" th:src="@{/uploads/posts/{photo}(photo=${post.id + '/' + post.file})}"
                                type='video/ogg; codecs="theora, vorbis"'>
                        <source src="" th:src="@{/uploads/posts/{photo}(photo=${post.id + '/' + post.file})}"
                                type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'>
                        <source src="" th:src="@{/uploads/posts/{photo}(photo=${post.id + '/' + post.file})}"
                                type='video/webm; codecs="vp8, vorbis"'>
                        This browser not supported tag video.
                    </video>

                    <img th:case="'image'" class="card-img-top"
                         src="" th:src="@{/uploads/posts/{photo}(photo=${post.id + '/' + post.file})}" alt="post">

                    <img th:case="*" class="card-img-top" src="" th:src="@{/images/post/4.jpg}" alt="post">
                </div>

                <div class="card-body">
                    <h2 class="card-title font-italic" th:text="${post.title}"></h2>
                    <p class="card-text" th:text="${post.subtitle}"></p>
                    <a class="btn btn-primary" th:href="@{/posts/info/{id}(id=${post.id})}">Read More</a>
                </div>
                <div class="card-footer text-muted">
                    <p th:text="${post.categoryName}"></p>
                    <span th:text="${post.publicationDate}"> by</span>
                </div>
            </div>

            <div th:replace="post/include/pagination.html"></div>

        </div>
        <div th:replace="post/include/sidebar.html"></div>
    </div>
    <!-- /.row -->
</div>
<!-- /.container -->

<!-- Footer -->
<footer th:replace="include/footer.html"></footer>
</body>

</html>

