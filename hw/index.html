<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cars</title>
    <link rel="stylesheet" type="text/css" href="css/Гонки.css">
</head>
<body>

<p id="one">AUTO</p>
<p id="two">BIKE</p>
<a id="git" href="https://github.com/frytgy22/javahw/tree/master/hw">Go to github</a>
<script src="https://code.jquery.com/jquery-2.1.0.js"></script>
<script>
    alert("Кликом на кнопку \"AUTO\" или \"BIKE\" сделайте ставку, кто победит в гонке." +
        "\nЗадания будут доступны в конце гонок!");

    var choice = false;
    var nameBet = "АВТО";
    var id;
    $("#one").click(function (event) {
        if (!choice) {
            alert("ВЫ СДЕЛАЛИ СТАВКУ НА АВТО!!!");
            choice = true;
            document.getElementById("one").style.backgroundColor = '#d8251f';
            document.getElementById("one").style.border = '3px inset #505050';
            id = setInterval(go, 30);
        } else {
            alert("ВЫ УЖЕ ВЫБРАЛИ: " + nameBet);
        }
    });

    $("#two").click(function (event) {
        if (!choice) {
            alert("ВЫ СДЕЛАЛИ СТАВКУ НА БАЙК!!!");
            choice = true;
            document.getElementById("two").style.backgroundColor = '#d8251f';
            document.getElementById("two").style.border = '3px inset #505050';
            nameBet = "БАЙК";
            id = setInterval(go, 30);
        } else {
            alert("ВЫ УЖЕ ВЫБРАЛИ: " + nameBet);
        }
    });

    $("body").append("<img id=finish width=300 height=142 src=images/12.png alt=\"finish\">");
    var Car = function (x, y, photo) {
        this.x = x;
        this.y = y;
        this.photo = photo;
        this.carElement = "";
        this.draw();
    };

    Car.prototype.draw = function () {
        this.carElement = $(this.photo);

        this.carElement.css({
            position: "absolute",
            left: this.x,
            top: this.y
        });

        $("body").append(this.carElement);
    };

    Car.prototype.moveRight = function (distance) {
        this.x += distance;

        this.carElement.css({
            left: this.x,
            top: this.y
        });
    };

    var carHtml1 = '<img src="images/car.png" alt="car">';
    var carHtml2 = '<img id="map" width=128 height=128 src="images/1.png" alt="car">';

    var avto = new Car(0, 100, carHtml1);
    var motorbike = new Car(0, 350, carHtml2);

    function go() {
        avto.moveRight(Math.random() * 10);
        motorbike.moveRight(Math.random() * 10);

        if (motorbike.x >= 1200) {
            if (nameBet !== "БАЙК") {
                alert("КОНЕЦ ИГРЫ!\nВЫ НЕ УГАДАЛИ, ПОБЕДИЛ БАЙК!\nВ СЛЕДУЮЩИЙ РАЗ ОБЯЗАТЕЛЬНО ПОВЕЗЕТ:)");
                gitVisible();
            } else {
                alert("КОНЕЦ ИГРЫ!\nВЫ УГАДАЛИ, ПОБЕДИЛ БАЙК!!!");
                gitVisible();
            }
            clearInterval(id);
        } else if (avto.x >= 1200) {
            if (nameBet !== "АВТО") {
                alert("КОНЕЦ ИГРЫ!\nВЫ НЕ УГАДАЛИ, ПОБЕДИЛ АВТО!\nВ СЛЕДУЮЩИЙ РАЗ ОБЯЗАТЕЛЬНО ПОВЕЗЕТ:)");
                gitVisible();
            } else {
                alert("КОНЕЦ ИГРЫ!\nВЫ УГАДАЛИ, ПОБЕДИЛ АВТО!!!");
                gitVisible();
            }
            clearInterval(id);
        }
    }

    function gitVisible() {
        document.getElementById("git").style.visibility = "visible";
        document.getElementById("git").style.opacity = "1";
    }
</script>
</body>
</html>
