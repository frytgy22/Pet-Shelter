<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TAG</title>
    <link rel="stylesheet" type="text/css" href="index.css">
</head>
<body onload="message()">

<!--верхняя панель-->
<div id="up">
    <ul>
        <li><a href="../index.html">Task 1</a></li>
        <li><a href="../Task2/index.html">Task 2</a></li>
        <li><a href="https://github.com/frytgy22/javahw/tree/master/hw38">GitHub</a></li>
        <li><a href="https://google.com">Google</a></li>
    </ul>
</div>
<img alt="logo" height="100" src="images/logo.png"
     style="position: absolute; right: 0;top: 0" width="100">

<!--список TAG-->
<div id="tableD">
    <dl>
        <dt>TAG</dt>
        <dt>[tæg]</dt>
        <dt><em>noun</em></dt>
        <dd>
            <ol>
                <li>
                    <ol class="id">
                        <li>a label attached to someone or something for the purpose of identification or to give other
                            information.
                        </li>
                        <li>"he gave his pet a collar with a metal name tag"</li>
                        <li>synonyms: <span class="color">label, ticket, badge, mark, marker, tab, tally, sticker, docket, stub, chit,
                            chitt, counterfoi, flag, stamp</span>
                        </li>
                        <li>"a price tag"</li>
                    </ol>
                </li>
                <li>a small piece or part that is attached to a main body.</li>
            </ol>
        </dd>
        <dt><em>verb</em></dt>
        <dd>
            <ol>
                <li>
                    <ol class="id">
                        <li>attach a label to.</li>
                        <li>"mothers suspected that their babies had been wrongly tagged during an alarm at the
                            hospital"
                        </li>
                        <li>synonyms: <span class="color">label, attach tags to, put a label on, mark, ticket, earmark, identify, docket,
                            flag, indicate</span>
                        </li>
                        <li>"the bottles were tagged with colour-coded labels"</li>
                    </ol>
                </li>
                <li>
                    <ol class="id">
                        <li>add to something, especially as an afterthought or with no real connection.</li>
                        <li>"she meant to <b>tag</b> her question <b>on</b> at the end of her remarks"</li>
                        <li>synonyms: <span class="color">add, tack, join, attach, append, affix, annex</span></li>
                        <li>"their heads were so large that the rest of their bodies seemed <b>tagged on</b> as an
                            afterthought"
                        </li>
                    </ol>
                </li>
            </ol>
        </dd>
    </dl>
</div>

<img id="table" src="images/45.png" width="400" height="400"
     style="position: absolute; left: 900px; top: 100px;" alt="table">

<img id="map" src="images/22.jpg" width="800" height="600"
     style="position: absolute; left: 20px; top: 100px;" alt="map">

<img id="heading" src="images/попугай-пират.gif" alt="pirate"
     style="position: fixed; "/>

<p id="distance"></p>

<script src="https://code.jquery.com/jquery-2.1.0.js"></script>
<script>

    function message() {
        alert("Упс...3-е задание похитили пираты и спрятали на острове. Чтоб его найти," +
            " кликайте по карте.\nСправа на доске будут подсказки. И помните, у вас есть всего 50 кликов!")
    }

    var offset = -50;
    var myWidth = window.innerWidth;
    var myHeight = window.innerHeight;

    $("#heading").offset({left: offset, top: myHeight - 100});
    var moveHeading = function () {
        $("#heading").offset({left: offset});
        offset++;
        if (offset > myWidth) {
            offset = -50;
        }
    };
    var id = setInterval(moveHeading, 30);
    var clickHandler = function (event) {
        clearInterval(id);
    };
    $("#heading").click(clickHandler);


    // Get a random number from 0 to size
    var getRandomNumber = function (size) {
        return Math.floor(Math.random() * size);
    };

    // Calculate distance between click event and target
    var getDistance = function (event, target) {
        var diffX = event.offsetX - target.x;
        var diffY = event.offsetY - target.y;
        return Math.sqrt((diffX * diffX) + (diffY * diffY));
    };

    var fadeOut = function () {
        $("#distance").fadeOut(3000);
        $("#map").fadeOut(3000);
        $("#table").fadeOut(3000);
    };

    // Get a string representing the distance
    var getDistanceHint = function (distance) {
        if (distance < 40) {
            return "Горит!";
        } else if (distance < 70) {
            return "Очень горячо!";
        } else if (distance < 100) {
            return "Горячо!";
        } else if (distance < 200) {
            return "Тепло!";
        } else if (distance < 350) {
            return "Холодно!";
        } else if (distance < 500) {
            return "Очень холодно!";
        } else {
            return "Замерзнешь!";
        }
    };

    // Создаем переменные
    var width = 800;
    var height = 600;
    var clicks = 0;

    // Случайная позиция клада
    var target = {
        x: getRandomNumber(width),
        y: getRandomNumber(height)
    };

    // Добавляем элементу img обработчик клика
    $("#map").click(function (event) {
        clicks++;

        // Получаем расстояние от места клика до клада
        var distance = getDistance(event, target);
        // Преобразуем расстояние в подсказку
        var distanceHint = getDistanceHint(distance);

        // Записываем в элемент #distance новую подсказку
        $("#distance").text(distanceHint);

        // Если клик был достаточно близко, поздравляем с победой
        if (distance < 20) {
            alert("Поздравляю! Вы нашли задание за " + clicks + " кликов");
            fadeOut();
            document.getElementById("tableD").style.visibility = "visible";
            document.getElementById("tableD").style.opacity = "1";
        }
        if (clicks >= 50) {
            alert("КОНЕЦ ИГРЫ! Сделано 50 кликов, попробуйте еше раз.");
            fadeOut();
        }
    });

</script>
</body>
</html>